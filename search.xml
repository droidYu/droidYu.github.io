<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>View体系（一）基础知识</title>
      <link href="/android/view/1-basic/"/>
      <url>/android/view/1-basic/</url>
      
        <content type="html"><![CDATA[<h1 id="View-及ViewGroup"><a href="#View-及ViewGroup" class="headerlink" title="View 及ViewGroup"></a>View 及ViewGroup</h1><p>在Android中，常用控件可大致分为两大类：<code>View</code>与<code>ViewGroup</code>。<code>ViewGroup</code>可包含多个<code>View</code>及<code>ViewGroup</code>，形成一个树状结构。需要注意的是<code>ViewGroup</code>也继承自<code>View</code>。View及ViewGroup组织结构如下：<br><img src="https://pic.imgdb.cn/item/61f22a542ab3f51d91780c5e.png"></p><h1 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h1><p>在Android中有两种坐标系：Android坐标系和View坐标系。了解坐标系是对View进行更多操作的基础。</p><h2 id="Android坐标系"><a href="#Android坐标系" class="headerlink" title="Android坐标系"></a>Android坐标系</h2><p>以屏幕左上角为原点，原点向右为<code>X</code>轴正方向，原点向下为<code>Y</code>轴正方向。在触控事件中，<code>getRawX()</code>、<code>getRawY()</code>获取的坐标也是Android坐标系的坐标。</p><p><img src="https://pic.imgdb.cn/item/61efa6722ab3f51d91557262.jpg"></p><h2 id="View坐标系"><a href="#View坐标系" class="headerlink" title="View坐标系"></a>View坐标系</h2><p>View坐标系是以View为基础的坐标系，搞清楚下图的关系也就清楚了View坐标系。<br><img src="https://pic.imgdb.cn/item/61efa6802ab3f51d91557ee0.jpg"></p><p>下面解释一下上图中涉及到的各个方法。<br>其中下面4个方法可在View中直接获取：</p><ul><li><code>getTop()</code>：获取View顶边到父View顶边的距离</li><li><code>getBottom()</code>：获取View底边到父View顶边的距离</li><li><code>getLeft()</code>：获取View左边到父View左边的距离</li><li><code>getRight()</code>：获取View右边到父View左边的距离</li></ul><p>剩余4个方法需要在View有触摸事件发生时，通过onTouchEvent(MotionEvent event)方法中的event获取：</p><ul><li><code>getX()</code>：触摸点到View左边的距离</li><li><code>getY()</code>：触摸点到View顶边的距离</li><li><code>getRawX()</code>：触摸点到屏幕左边的距离</li><li><code>getRawY()</code>：触摸点到屏幕顶边的距离</li></ul><p>示例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyView</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyView</span><span class="params">(Context context, <span class="meta">@Nullable</span> AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> top = getTop();</span><br><span class="line">    <span class="keyword">int</span> bottom = getBottom();</span><br><span class="line">    <span class="keyword">int</span> left = getLeft();</span><br><span class="line">    <span class="keyword">int</span> right = getRight();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">float</span> x = event.getX();</span><br><span class="line">        <span class="keyword">float</span> y = event.getY();</span><br><span class="line">        <span class="keyword">float</span> rawX = event.getRawX();</span><br><span class="line">        <span class="keyword">float</span> rawY = event.getRawY();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>源码见<a href="https://github.com/droidYu/view-system.git">Github</a></p><p>参考文献：<br>《Android进阶之光》<br>《Android开发艺术探索》</p>]]></content>
      
      
      <categories>
          
          <category> View体系 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> View体系 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
